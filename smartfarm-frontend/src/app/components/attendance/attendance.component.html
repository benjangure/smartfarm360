<div class="space-y-8 p-6 min-h-screen relative overflow-hidden">
  <!-- Creative Background -->
  <div class="absolute inset-0 -z-10">
    <div class="w-full h-full bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 relative">
      <!-- Clock Pattern -->
      <div class="absolute inset-0 opacity-20" 
           style="background-image: radial-gradient(circle at 50% 50%, #3b82f6 1px, transparent 1px); background-size: 40px 40px;"></div>
      <!-- Animated Waves -->
      <div class="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-blue-100/50 to-transparent"></div>
      <div class="absolute top-0 right-0 w-full h-32 bg-gradient-to-b from-indigo-100/50 to-transparent"></div>
      <!-- Floating Elements -->
      <div class="absolute top-32 left-32 w-40 h-40 bg-gradient-to-br from-blue-200/20 to-indigo-300/20 rounded-full blur-2xl animate-bounce" style="animation-duration: 6s;"></div>
      <div class="absolute bottom-32 right-32 w-32 h-32 bg-gradient-to-br from-purple-200/20 to-blue-300/20 rounded-full blur-2xl animate-bounce" style="animation-delay: 3s; animation-duration: 8s;"></div>
    </div>
  </div>
  <!-- Header -->
  <div class="bg-white rounded-2xl shadow-lg p-6 border border-blue-100">
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
      <div class="flex items-center space-x-4">
        <div class="h-16 w-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center">
          <i class="fas fa-clock text-white text-2xl"></i>
        </div>
        <div>
          <h1 class="text-3xl font-bold bg-gradient-to-r from-blue-700 to-indigo-600 bg-clip-text text-transparent">
            Time & Attendance
          </h1>
          <p class="text-gray-600 mt-1 flex items-center">
            <i class="fas fa-map-marker-alt text-blue-500 mr-2"></i>
            GPS-enabled attendance tracking system
          </p>
        </div>
      </div>
      <div class="mt-4 lg:mt-0">
        <div class="bg-gradient-to-r from-blue-100 to-indigo-100 rounded-xl p-4 text-center">
          <p class="text-sm text-blue-700 font-medium">Current Time</p>
          <p class="text-2xl font-bold text-blue-800">{{ currentTime | date:'shortTime' }}</p>
          <p class="text-xs text-blue-600">{{ currentTime | date:'shortDate' }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions for Workers -->
  <div *ngIf="currentUser?.role === 'WORKER'" class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Check In/Out Card -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-gray-100">
      <div class="text-center">
        <div class="mx-auto h-20 w-20 rounded-full flex items-center justify-center mb-6"
             [class]="isCheckedIn ? 'bg-red-100' : 'bg-green-100'">
          <i [class]="isCheckedIn ? 'fas fa-sign-out-alt text-red-600 text-3xl' : 'fas fa-sign-in-alt text-green-600 text-3xl'"></i>
        </div>
        
        <h3 class="text-2xl font-bold text-gray-900 mb-2">
          {{ isCheckedIn ? 'Check Out' : 'Check In' }}
        </h3>
        
        <p class="text-gray-600 mb-6">
          {{ isCheckedIn ? 'End your work day' : 'Start your work day' }}
        </p>

        <!-- Location Status -->
        <div class="mb-6 p-4 rounded-xl" [class]="locationStatus === 'granted' ? 'bg-green-50 border border-green-200' : 'bg-yellow-50 border border-yellow-200'">
          <div class="flex items-center justify-center">
            <i [class]="locationStatus === 'granted' ? 'fas fa-map-marker-alt text-green-600 mr-2' : 'fas fa-exclamation-triangle text-yellow-600 mr-2'"></i>
            <span class="text-sm font-medium" [class]="locationStatus === 'granted' ? 'text-green-800' : 'text-yellow-800'">
              {{ locationStatus === 'granted' ? 'Location verified' : 'Location access needed' }}
            </span>
          </div>
          <p class="text-xs mt-1" [class]="locationStatus === 'granted' ? 'text-green-600' : 'text-yellow-600'">
            {{ locationStatus === 'granted' ? 'GPS coordinates captured' : 'Please enable location access' }}
          </p>
        </div>

        <!-- Face Scan Toggle -->
        <div *ngIf="!isCheckedIn" class="mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <i class="fas fa-user-check text-blue-600 mr-2"></i>
              <span class="text-sm font-medium text-blue-800">Face Verification</span>
            </div>
            <button 
              (click)="toggleFaceScan()"
              class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
              [class]="faceScanEnabled ? 'bg-blue-600' : 'bg-gray-200'">
              <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"
                    [class]="faceScanEnabled ? 'translate-x-6' : 'translate-x-1'"></span>
            </button>
          </div>
          <p class="text-xs text-blue-600 mt-1">
            {{ faceScanEnabled ? 'Face scan required for check-in' : 'Face scan disabled' }}
          </p>
        </div>

        <button 
          (click)="isCheckedIn ? clockOut() : clockIn()"
          [disabled]="clockingIn || clockingOut || locationStatus !== 'granted'"
          class="w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
          [class]="isCheckedIn ? 'bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white' : 'bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white'">
          <span *ngIf="clockingIn || clockingOut" class="inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></span>
          <i *ngIf="!clockingIn && !clockingOut && faceScanEnabled && !isCheckedIn" class="fas fa-user-check mr-2"></i>
          <i *ngIf="!clockingIn && !clockingOut && !faceScanEnabled && !isCheckedIn" class="fas fa-sign-in-alt mr-2"></i>
          <i *ngIf="!clockingIn && !clockingOut && isCheckedIn" class="fas fa-sign-out-alt mr-2"></i>
          {{ clockingIn ? 'Checking In...' : (clockingOut ? 'Checking Out...' : (isCheckedIn ? 'Check Out Now' : (faceScanEnabled ? 'Check In with Face Scan' : 'Check In Now'))) }}
        </button>
      </div>
    </div>

    <!-- Today's Summary -->
    <div class="bg-white rounded-2xl shadow-lg p-8 border border-gray-100">
      <h3 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
        <i class="fas fa-calendar-day text-blue-600 mr-3"></i>
        Today's Summary
      </h3>
      
      <div class="space-y-4">
        <div class="flex items-center justify-between p-4 bg-blue-50 rounded-xl">
          <div class="flex items-center">
            <i class="fas fa-clock text-blue-600 mr-3"></i>
            <span class="font-medium text-gray-700">Check In Time</span>
          </div>
          <span class="font-bold text-blue-800">
            {{ todayAttendance?.checkInTime || '--:--' }}
          </span>
        </div>
        
        <div class="flex items-center justify-between p-4 bg-red-50 rounded-xl">
          <div class="flex items-center">
            <i class="fas fa-clock text-red-600 mr-3"></i>
            <span class="font-medium text-gray-700">Check Out Time</span>
          </div>
          <span class="font-bold text-red-800">
            {{ todayAttendance?.checkOutTime || '--:--' }}
          </span>
        </div>
        
        <div class="flex items-center justify-between p-4 bg-green-50 rounded-xl">
          <div class="flex items-center">
            <i class="fas fa-hourglass-half text-green-600 mr-3"></i>
            <span class="font-medium text-gray-700">Total Hours</span>
          </div>
          <span class="font-bold text-green-800">
            {{ todayAttendance?.totalHours || '0.0' }} hrs
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Attendance History -->
  <div class="bg-white rounded-2xl shadow-lg border border-gray-100">
    <div class="p-6 border-b border-gray-100">
      <div class="flex items-center justify-between">
        <h3 class="text-xl font-bold text-gray-900 flex items-center">
          <i class="fas fa-history text-indigo-600 mr-3"></i>
          Attendance History
        </h3>
        <div class="flex items-center space-x-4">
          <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option>Last 7 days</option>
            <option>Last 30 days</option>
            <option>This month</option>
          </select>
          <button 
            (click)="exportAttendance()"
            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
            <i class="fas fa-download mr-2"></i>Export
          </button>
          <button 
            (click)="resetAttendance()"
            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
            <i class="fas fa-redo mr-2"></i>Reset
          </button>
        </div>
      </div>
    </div>
    
    <div class="p-6">
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr class="border-b border-gray-200">
              <th class="text-left py-3 px-4 font-semibold text-gray-700">Date</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700">Check In</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700">Check Out</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700">Total Hours</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700">Status</th>
              <th class="text-left py-3 px-4 font-semibold text-gray-700">Location</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let record of attendanceHistory" class="border-b border-gray-100 hover:bg-gray-50">
              <td class="py-4 px-4">{{ record.date | date:'shortDate' }}</td>
              <td class="py-4 px-4">{{ record.checkIn | date:'shortTime' }}</td>
              <td class="py-4 px-4">{{ record.checkOut | date:'shortTime' || '--:--' }}</td>
              <td class="py-4 px-4 font-semibold">{{ record.totalHours }} hrs</td>
              <td class="py-4 px-4">
                <span class="px-3 py-1 rounded-full text-xs font-medium"
                      [class]="getStatusClass(record.status)">
                  {{ record.status }}
                </span>
              </td>
              <td class="py-4 px-4">
                <button class="text-blue-600 hover:text-blue-800 text-sm">
                  <i class="fas fa-map-marker-alt mr-1"></i>View
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Face Scan Modal -->
<app-face-scan-modal 
  [isOpen]="showFaceScanModal"
  [userId]="currentUser?.id || 0"
  (scanComplete)="onFaceScanComplete($event)"
  (closeModal)="onFaceScanCancel()">
</app-face-scan-modal>